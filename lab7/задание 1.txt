1. Управление пользователями

- Создадим нового пользователя. Параметр -m создаёт домашний каталог для пользователя:
sudo useradd -m newuser
- Убедимся в том, что информация о новом пользователе появилась в файлах. /etc/passwd — информация о пользователе. /etc/shadow — информация о пароле пользователя. /etc/group — информация о группах::
cat /etc/passwd | grep newuser
sudo cat /etc/shadow | grep newuser
cat /etc/group | grep newuser
- Удалим созданного пользователя. Параметр -r удаляет домашний каталог пользователя:
sudo userdel -r newuser

2. Управление группами

- Создадим новую группу:
sudo groupadd newgroup
- Сменим группу пользователя:
sudo usermod -g newgroup newuser
- Добавим пользователя в группу без изменения основной:
sudo usermod -aG newgroup newuser
- Удалить пользователя из группы. Изменим файл /etc/group с помощью текстового редактора nano. Удалим имя пользователя из строки с названием группы:
sudo nano /etc/group

3. Создание пользователя с правами суперпользователя

- Создадим нового пользователя:
sudo useradd -m sudo_user
- Зададим пароль новому пользователю:
sudo passwd sudo_user
- Добавим его в группу sudo:
sudo usermod -aG sudo sudo_user
- Проверим права, сменив пользователя на sudo_user. Команда whoami должна вернуть root:
su sudo_user
sudo whoami

4. Выдача прав пользователю на выполнение определённых команд

- Откроем файл /etc/sudoers с помощью команды visudo для безопасного редактирования:
sudo visudo
- Добавим в файл строку с правами для пользователя, чтобы пользователь newuser мог перезагружать систему и редактировать файл конфигурации SSH без ввода пароля, строка будет выглядеть так:
newuser ALL=(ALL) NOPASSWD: /usr/sbin/reboot, /usr/sbin/nano /etc/ssh/sshd_config
- Сменим пользователя и попробуем выполнить одну из этих команд. Убедимся в том, что пароль не требуется для выполнения команды:
sudo reboot